{"version":3,"file":"web-mito-sdk.modern.mjs","sources":["../src/index.js","../src/module/watchJsError.js"],"sourcesContent":["import { watchJsError }  from \"./module/watchJsError.js\";\n\nclass webMitoSdkInit {\n  /*\n    name : 上报组件名称，\n    sendApi: 是否上报api接口报错,\n    sendResource:是否上报资源请求错误，\n    sendJsError:, 是否上报 js error\n    */\n  constructor({ name, sendApi, sendResource, sendJsError }) {\n    this.name = name;\n    this.sendApi = sendApi;\n    this.sendResource = sendResource;\n    this.sendJsError = sendJsError;\n  }\n  init() {\n    this.sendJsError && watchJsError(this.name);\n  }\n}\n\nlet webMitoSdkInits = new webMitoSdkInit({\n  name: \"opcenter\",\n  sendJsError: true,\n});\n\nwebMitoSdkInits.init();\n","export function watchJsError(name) {\n  const onError = window.onerror;\n  function errorHandler(message, source, lineno, colno, error) {\n    if (onError) {\n      try {\n        onError.call(message, source, lineno, colno, error);\n      } catch (err) {}\n    }\n    if (error != null) {\n      //上报\n      console.log(error);\n    }\n  }\n  window.onerror = function (message, source, lineno, colno, error) {\n    errorHandler(message, source, lineno, colno, error);\n  };\n}\n"],"names":["constructor","name","sendApi","sendResource","sendJsError","this","init","window","onerror","message","source","lineno","colno","error","onError","call","err","console","log","errorHandler","watchJsError"],"mappings":"AAoBsB,IAlBtB,MAOEA,aAAYC,KAAEA,EAAIC,QAAEA,EAAOC,aAAEA,EAAYC,YAAEA,IACzCC,KAAKJ,KAAOA,EACZI,KAAKH,QAAUA,EACfG,KAAKF,aAAeA,EACpBE,KAAKD,YAAcA,CACrB,CACAE,OACED,KAAKD,aChBF,SAAsBH,GAC3B,QAAgBM,OAAOC,QAYvBD,OAAOC,QAAU,SAAUC,EAASC,EAAQC,EAAQC,EAAOC,IAX3D,SAAsBJ,EAASC,EAAQC,EAAQC,EAAOC,GACpD,GAAIC,EACF,IACEA,EAAQC,KAAKN,EAASC,EAAQC,EAAQC,EAAOC,GAC7C,MAAOG,IAEE,MAATH,GAEFI,QAAQC,IAAIL,EAEhB,CAEEM,CAAaV,EAASC,EAAQC,EAAQC,EAAOC,EAC/C,CACF,CDAwBO,EACtB,GAGuC,CACvCnB,KAAM,WACNG,aAAa,IAGCE"}