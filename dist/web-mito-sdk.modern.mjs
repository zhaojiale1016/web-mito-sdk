class e{constructor({name:e,type:t,config:n,sendApi:r,sendResource:s,sendJsError:o}){this.name=e,this.type=t,this.config=n,this.sendApi=r,this.sendJsError=o,this.sendResource=s}init(){var e,t;this.sendApi&&window.XMLHttpRequest&&function(){const e=window.XMLHttpRequest.prototype,t=e.send;var n=function(e){e&&e.currentTarget&&200!==e.currentTarget.status&&console.log(e.currentTarget,"apiError")};e.send=function(){if(this.addEventListener)this.addEventListener("error",n),this.addEventListener("load",n),this.addEventListener("abort",n);else{var e=this.onreadystatechange;this.onreadystatechange=function(t){4===this.readyState&&n(t),e&&e.apply(this,arguments)}}return t.apply(this,arguments)}}(),this.sendApi&&function(e){if(!window.fetch)return;let t=window.fetch;window.fetch=function(){return t.apply(this,arguments).then(e=>e).catch(e=>{throw e})}}(),this.sendJsError&&(e=this.type,t=this.config,window.addEventListener("error",e=>{e.target.localName||console.log("这是代码错误",e)},!0),window.addEventListener("unhandledrejection",e=>{console.log("这是Promise场景中错误",e)}),"VUE"==e&&(t.errorHandler=function(e,t,n){console.log(t.$options.propsData,"vue内部错误")})),this.sendResource&&window.addEventListener("error",e=>{e.target.localName&&console.log("这是资源错误",e)},!0)}}export{e as webMitoSdkInit};
//# sourceMappingURL=web-mito-sdk.modern.mjs.map
