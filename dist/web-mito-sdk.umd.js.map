{"version":3,"file":"web-mito-sdk.umd.js","sources":["../src/index.js","../src/module/watchJsError.js"],"sourcesContent":["import { watchJsError }  from \"./module/watchJsError.js\";\n\nclass webMitoSdkInit {\n  /*\n    name : 上报组件名称，\n    sendApi: 是否上报api接口报错,\n    sendResource:是否上报资源请求错误，\n    sendJsError:, 是否上报 js error\n    */\n  constructor({ name, sendApi, sendResource, sendJsError }) {\n    this.name = name;\n    this.sendApi = sendApi;\n    this.sendResource = sendResource;\n    this.sendJsError = sendJsError;\n  }\n  init() {\n    this.sendJsError && watchJsError(this.name);\n  }\n}\n\nlet webMitoSdkInits = new webMitoSdkInit({\n  name: \"opcenter\",\n  sendJsError: true,\n});\n\nwebMitoSdkInits.init();\n","export function watchJsError(name) {\n  const onError = window.onerror;\n  function errorHandler(message, source, lineno, colno, error) {\n    if (onError) {\n      try {\n        onError.call(message, source, lineno, colno, error);\n      } catch (err) {}\n    }\n    if (error != null) {\n      //上报\n      console.log(error);\n    }\n  }\n  window.onerror = function (message, source, lineno, colno, error) {\n    errorHandler(message, source, lineno, colno, error);\n  };\n}\n"],"names":["webMitoSdkInit","_ref","sendApi","sendResource","sendJsError","this","name","init","window","onerror","message","source","lineno","colno","error","onError","call","err","console","log","errorHandler"],"mappings":"6EAoBsB,4BAXpB,SAA0DA,EAAAC,GAAA,IAAtCC,IAAAA,QAASC,EAAAA,EAAAA,aAAcC,IAAAA,YACzCC,KAAKC,KADWL,EAAJK,KAEZD,KAAKH,QAAUA,EACfG,KAAKF,aAAeA,EACpBE,KAAKD,YAAcA,CACrB,CAMF,OALEG,EAAAA,UAAAA,KAAA,WCfK,MDgBHF,KAAKD,gBCfSI,OAAOC,QAYvBD,OAAOC,QAAU,SAAUC,EAASC,EAAQC,EAAQC,EAAOC,IAX3D,SAAsBJ,EAASC,EAAQC,EAAQC,EAAOC,GACpD,GAAIC,EACF,IACEA,EAAQC,KAAKN,EAASC,EAAQC,EAAQC,EAAOC,GAC7C,MAAOG,IAEE,MAATH,GAEFI,QAAQC,IAAIL,EAEhB,CAEEM,CAAaV,EAASC,EAAQC,EAAQC,EAAOC,EAC/C,EDEA,EAGFd,CAAA,IAAsB,CAAmB,CACvCM,KAAM,WACNF,aAAa,IAGCG"}