!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports):"function"==typeof define&&define.amd?define(["exports"],t):t((e||self).webMitoSdk={})}(this,function(e){function t(e){return new Promise(function(t,n){var o=new XMLHttpRequest;if(o.open(e.method,e.url),"GET"===e.method.toUpperCase()||"DELETE"===e.method.toUpperCase())o.send(null);else if("POST"===e.method.toUpperCase()){var r=JSON.stringify(e.data);o.setRequestHeader("Content-Type","application/json"),o.send(r)}o.onreadystatechange=function(){if(4==o.readyState)if(200==o.status)try{var e="string"==typeof o.responseText?JSON.parse(o.responseText):o.responseText;t(e)}catch(e){n(e)}else n(o)}})}var n=/*#__PURE__*/function(){function e(e){var t=e.type,n=e.config,o=e.sendApi,r=e.sendResource,s=e.sendJsError;this.name=e.name,this.type=t,this.config=n,this.sendApi=o,this.sendJsError=s,this.sendResource=r}return e.prototype.init=function(){var e,n,o,r,s,i;this.sendApi&&window.XMLHttpRequest&&(e=window.XMLHttpRequest.prototype,n=e.send,o=function(e){e&&e.currentTarget&&200!==e.currentTarget.status&&console.log(e.currentTarget,"apiError")},e.send=function(){if(this.addEventListener)this.addEventListener("error",o),this.addEventListener("load",o),this.addEventListener("abort",o);else{var e=this.onreadystatechange;this.onreadystatechange=function(t){4===this.readyState&&o(t),e&&e.apply(this,arguments)}}return n.apply(this,arguments)}),this.sendApi&&function(e){if(window.fetch){var t=window.fetch;window.fetch=function(){return t.apply(this,arguments).then(function(e){return e}).catch(function(e){throw e})}}}(),this.sendJsError&&(r=this.name,s=this.type,i=this.config,window.addEventListener("error",function(e){e.target.localName||(t({method:"POST",url:"http://localhost:8081/logapi/addErrorLog",data:{title:e.error.message,type:"jsError",detail:encodeURI(e.error.stack),component:r,description:e.filename}}),console.log(e))},!0),window.addEventListener("unhandledrejection",function(e){console.log("这是Promise场景中错误",e),t({method:"POST",url:"http://localhost:8081/logapi/addErrorLog",data:{title:e,type:"jsPromiseError"}})}),"VUE"==s&&(i.errorHandler=function(e,n,o){t({method:"POST",url:"http://localhost:8081/logapi/addErrorLog",data:{title:e.message,type:"vueError",detail:encodeURI(e.stack),component:r,description:"组件"+n.$vnode.tag+"发生错误："+e.message+", "+o}}),console.log(e)})),this.sendResource&&window.addEventListener("error",function(e){e.target.localName&&console.log("这是资源错误",e)},!0)},e}();e.webMitoSdkInit=n});
//# sourceMappingURL=web-mito-sdk.umd.js.map
