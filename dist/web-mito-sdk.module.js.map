{"version":3,"file":"web-mito-sdk.module.js","sources":["../src/index.js","../src/module/watchJsError.js"],"sourcesContent":["import { watchApiError } from \"./module/watchApiError.js\";\nimport { watchJsError } from \"./module/watchJsError.js\";\nimport { watchResourceError } from \"./module/watchResourceError.js\";\n\nclass webMitoSdkInit {\n  /*\n    name : 上报组件名称，\n    sendApi: 是否上报api接口报错,\n    sendResource:是否上报资源请求错误，\n    sendJsError:, 是否上报 js error\n    */\n  constructor({ name, sendApi, sendResource, sendJsError }) {\n    this.name = name;\n    this.sendApi = sendApi;\n    this.sendJsError = sendJsError;\n    this.sendResource = sendResource;\n  }\n  init() {\n    this.sendApi && watchApiError(this.name);\n    this.sendJsError && watchJsError(this.name);\n    this.sendResource && watchResourceError(this.name);\n  }\n}\n\nlet webMitoSdkInits = new webMitoSdkInit({\n  name: \"opcenter\",\n  sendJsError: true,\n});\n\nwebMitoSdkInits.init();\n","export function watchJsError(name) {\n  const onError = window.onerror;\n  function errorHandler(message, source, lineno, colno, error) {\n    if (onError) {\n      try {\n        onError.call(message, source, lineno, colno, error);\n      } catch (err) {}\n    }\n    if (error != null) {\n      //上报\n      console.log(message, source, lineno, colno, error);\n    }\n  }\n  window.onerror = function (message, source, lineno, colno, error) {\n    errorHandler(message, source, lineno, colno, error);\n  };\n}\n"],"names":["webMitoSdkInit","_ref","name","sendApi","sendResource","sendJsError","this","init","onError","window","onerror","message","source","lineno","colno","error","call","err","console","log","errorHandler"],"mappings":"AAwBsB,iBAbpB,WAAA,SAAAA,EAAAC,GAAcC,IAAMC,EAAAA,EAAAA,QAASC,IAAAA,aAAcC,EAAWJ,EAAXI,YACzCC,KAAKJ,KADOA,EAAAA,KAEZI,KAAKH,QAAUA,EACfG,KAAKD,YAAcA,EACnBC,KAAKF,aAAeA,CACtB,CAKC,mBAJDG,KAAA,WCjBK,IACQC,EDkBXF,KAAKD,cClBMG,EAAGC,OAAOC,QAYvBD,OAAOC,QAAU,SAAUC,EAASC,EAAQC,EAAQC,EAAOC,IAX3D,SAAsBJ,EAASC,EAAQC,EAAQC,EAAOC,GACpD,GAAIP,EACF,IACEA,EAAQQ,KAAKL,EAASC,EAAQC,EAAQC,EAAOC,EACjC,CAAZ,MAAOE,GAAK,CAEH,MAATF,GAEFG,QAAQC,IAAIR,EAASC,EAAQC,EAAQC,EAAOC,EAEhD,CAEEK,CAAaT,EAASC,EAAQC,EAAQC,EAAOC,EAC/C,EDMA,EAACf,CAAA,CAVD,GAaoB,CAAmB,CACvCE,KAAM,WACNG,aAAa,IAGCE"}